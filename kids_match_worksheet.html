<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kids Match Worksheet</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Emoji&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .worksheet {
            /* display: flex;
            justify-content: space-between; */
        }
        .column {
            width: 90%;
        }
        .problem {
            margin-bottom: 30px;
        }
        .emoji-line {
            font-size: 3em;
            line-height: 1.5;
            /* text-align: right; */
            width: 60%;

        }
        .answer-line {
            border-top: 1px solid #000;
            height: 30px;
        }
        .printable .emoji-line {
            font-family: 'Noto Emoji', sans-serif;
        }
        #controls {
            margin-bottom: 20px;
        }
        @media print {
            #controls {
                display: none;
            }
        }
        .problem-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div id="controls">
        <h1>Kids Match Worksheet</h1>
        <button onclick="generateWorksheet()">Generate New Worksheet</button>
        <label>
            <input type="checkbox" id="printable" onchange="togglePrintable()"> Printable
        </label>
        <label>
            <input type="checkbox" id="words" onchange="generateWorksheet()"> Words
        </label>
        <button onclick="generatePDF()">Download as PDF</button>
    </div>
    <div id="worksheet-container">
        <p>Match left hand side with the right hand side</p>
        <div class="worksheet" id="worksheet"></div>
    </div>

    <script>
        const animals = [
            ["ğŸ¶", "dog"],
            ["ğŸ±", "cat"],
            ["ğŸ¦", "lion"],
            ["ğŸ”", "chicken"],
            ["ğŸ¦", "bird"],
            ["ğŸ", "bee"],
            ["ğŸ", "green apple"],
            ["ğŸ", "red apple"],
            ["ğŸ", "pear"],
            ["ğŸŠ", "orange"],
            ["ğŸ‹", "lemon"],
            ["ğŸŒ", "banana"],
            ["ğŸ‰", "watermelon"],
            ["ğŸ‡", "grapes"],
            ["ğŸ“", "strawberry"],
            ["ğŸ¥•", "carrot"],
            ["ğŸŒ½", "corn"],
            ["ğŸ¥¦", "broccoli"],
            ["ğŸ…", "tomato"],
            ["ğŸ¥’", "cucumber"],
            ["ğŸŒ¶ï¸", "chili pepper"],
            ["ğŸ«‘", "bell pepper"],
            ["ğŸ†", "eggplant"],
            ["ğŸ¥”", "potato"],

            ["ğŸš’", "fire engine"],
            ["ğŸš“", "police car"],
            ["ğŸš‘", "ambulance"],
            ["ğŸšœ", "tractor"],
            ["ğŸ¥", "hospital"],
            ["ğŸ«", "school"],
            ["ğŸ¢", "office building"],
            // ["ğŸ‘©â€âš•ï¸", "woman health worker"],
            // ["ğŸ‘¨â€âš•ï¸", "man health worker"],
            ["ğŸ‘©â€ğŸ³", "cook"],
            ["ğŸ‘¨â€ğŸ³", "cook"],
            ["ğŸ‘©â€ğŸŒ¾", "farmer"],
            ["ğŸ‘¨â€ğŸŒ¾", "farmer"],
            ["ğŸ‘©â€ğŸ“", "student"],
            ["ğŸ‘¨â€ğŸ“", "student"],
            ["ğŸ‘©â€ğŸ«", "teacher"],
            ["ğŸ‘¨â€ğŸ«", "teacher"],
            ["ğŸ‘©â€ğŸš’", "firefighter"],
            // ["ğŸ‘¨â€ğŸš’", "firefighter"],
            ["ğŸ‘©â€ğŸ”§", "mechanic"],
            ["ğŸ‘¨â€ğŸ”§", "mechanic"],
            ["ğŸ‘©â€ğŸ”¬", "scientist"],
            ["ğŸ‘¨â€ğŸ”¬", "scientist"],

            ["ğŸ ", "fish"],
            ["ğŸ˜", "elephant"],
            ["ğŸ¦’", "giraffe"],
            ["ğŸ¦“", "zebra"],
            ["ğŸ¦Š", "fox"],
            ["ğŸ¦", "raccoon"],
            ["ğŸ¨", "koala"],
            ["ğŸ¼", "panda"],
            ["ğŸ¦¥", "sloth"],
            ["ğŸ¦¦", "otter"],
            ["ğŸ¦”", "hedgehog"],
            ["ğŸ¸", "frog"],
            ["ğŸŠ", "crocodile"],
            ["ğŸ¢", "turtle"],
            ["ğŸ¦", "lizard"],
            ["ğŸ", "snake"],
            ["ğŸ™", "octopus"],
            ["ğŸ¦‘", "squid"],
            ["ğŸ¦", "shrimp"],
            ["ğŸ¦€", "crab"],
            ["ğŸ¡", "puffer fish"],
            ["ğŸ…", "tiger"],
            ["ğŸ†", "leopard"],
            ["ğŸ‡", "rabbit"],
            ["ğŸ¦œ", "parrot"],
            ["ğŸ¦š", "peacock"],
            ["ğŸ¦‰", "owl"],
            ["ğŸ¦¢", "swan"],
            ["ğŸ¦©", "flamingo"],
            ["ğŸ¦…", "eagle"],
            ["ğŸ¦ƒ", "turkey"],
            ["ğŸ¦†", "duck"],
            ["ğŸ“", "rooster"],
            ["ğŸ¿ï¸", "squirrel"],
            ["ğŸ¦”", "hedgehog"],

            ["ğŸ“±", "mobile phone"],
            ["ğŸ“·", "camera"],
            ["ğŸ’»", "laptop"],
            ["ğŸ–¥ï¸", "computer"],
            ["â°", "clock"],
            ["ğŸ•°ï¸", "clock"],
            ["ğŸ“", "telephone"],
            // ["ğŸ“Ÿ", "pager"],
            ["ğŸ¥", "movie camera"],
            ["ğŸ¬", "clapper board"],
            ["ğŸ“º", "television"],
            ["ğŸ“»", "radio"],
            ["ğŸ™ï¸", "microphone"],
            ["ğŸ§", "headphones"],
            ["ğŸ–¨ï¸", "printer"],
            ["âŒ¨ï¸", "keyboard"],
            ["ğŸ–±ï¸", "computer mouse"],
            ["ğŸ–²ï¸", "trackball"],
            ["ğŸ•¹ï¸", "joystick"],

            ["ğŸ›‹ï¸", "couch"],
            ["ğŸ›ï¸", "bed"],
            ["ğŸšª", "door"],
            ["ğŸªŸ", "window"],
            ["ğŸš½", "toilet"],
            ["ğŸš¿", "shower"],
            ["ğŸ›", "bathtub"],
            ["ğŸª ", "plunger"],
            ["ğŸ§¹", "broom"],
            ["ğŸ§º", "picnic basket"],
            ["ğŸ§¼", "soap"],
            ["ğŸª£", "bucket"],
            ["ğŸ§½", "sponge"],
            ["ğŸ§´", "lotion bottle"],
            ["ğŸ”‘", "key"],
            ["ğŸ”’", "lock"],
            ["ğŸª‘", "chair"],
            ["ğŸ›’", "shopping cart"],
            ["ğŸ§¯", "fire extinguisher"],
            ["ğŸ•¯ï¸", "candle"],
            ["ğŸ› ï¸", "hammer"],

            ["ğŸ´", "fork"],
            ["ğŸ½ï¸", "plate"],
            ["ğŸ¥„", "spoon"],
            ["ğŸ”ª", "knife"],
            ["ğŸ¥£", "bowl"],
            ["ğŸ–", "meat"],
            ["ğŸ¥¡", "takeout box"],
            ["ğŸ§Š", "ice"],
            ["ğŸ§‚", "salt"],
            ["ğŸ§‡", "waffle"],

            ["ğŸ§¬", "dna"],
            ["ğŸ”¬", "microscope"],
            ["ğŸ”­", "telescope"],
            ["ğŸ“¡", "satellite antenna"],
            ["ğŸ’¡", "light bulb"],
            ["ğŸ”¦", "flashlight"],
            ["ğŸ®", "lantern"],
            ["ğŸª”", "diya lamp"],
            ["ğŸ“°", "newspaper"],
            ["ğŸ—ï¸", "rolled-up newspaper"],

            ["ğŸ“•", "closed book"],
            ["ğŸ“–", "open book"],
        ];

        function getRandomAnimal() {
            let i = Math.floor(Math.random() * animals.length)
            console.log(i, animals.length, animals[i])

            return animals[i];
        }

        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function generateProblem(left, right) {
            // const animal = getRandomAnimal();
            // const line1Count = getRandomNumber(2, 7);
            
            return `
                <div class="problem">
                    <div class="problem-line">
                        <div class="emoji-line">${left}</div>
                        <div style="font-size: 2em; ">${right}</div>
                    </div>
                    
                </div>
            `;
        }

        // shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        function generateWorksheet() {
            const worksheet = document.getElementById('worksheet');
            worksheet.innerHTML = '';
            isWord = document.getElementById('words').checked

            const N = isWord ? 8 : 6
            let lhs = [], rhs = []
            for (let i = 0; i < N; i++) {
                animal = getRandomAnimal();
                lhs[i] = animal[0]
                if (!isWord) {
                    rhs[i] = getRandomNumber(1, 10)
                    lhs[i] = (lhs[i] + " ").repeat(rhs[i])
                }
                else
                rhs[i] = animal[1]
            }
            shuffleArray(lhs)
            shuffleArray(rhs)

            // for (let col = 0; col < 2; col++)
            {
                const column = document.createElement('div');
                column.className = 'column';
                
                for (let prob = 0; prob < N; prob++) {
                    column.innerHTML += generateProblem(lhs[prob], rhs[prob]);
                }
                
                worksheet.appendChild(column);
            }
        }

        function togglePrintable() {
            const isPrintable = document.getElementById('printable').checked;
            document.body.classList.toggle('printable', isPrintable);
        }

        function generatePDF() {
            const element = document.getElementById('worksheet-container');
            const opt = {
                margin: 10,
                filename: 'kids_match_worksheet.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            // Temporarily hide controls
            document.getElementById('controls').style.display = 'none';

            // Add title to the worksheet for PDF
            const title = document.createElement('h1');
            title.textContent = 'Kids Matching Worksheet';
            element.insertBefore(title, element.firstChild);

            html2pdf().set(opt).from(element).save().then(() => {
                // Restore controls and remove title
                document.getElementById('controls').style.display = 'block';
                element.removeChild(title);
            });
        }

        // Generate the initial worksheet
        generateWorksheet();
    </script>
</body>
</html>

